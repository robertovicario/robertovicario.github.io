import{j as f}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Cd_vQiNd.js";const G=({glitchColors:R=["#5e4491","#A476FF","#241a38"],glitchSpeed:b=12,centerVignette:_=!1,outerVignette:$=!1,smooth:h=!0})=>{const i=s.useRef(null),d=s.useRef(null),o=s.useRef([]),g=s.useRef({columns:0,rows:0}),l=s.useRef(null),x=s.useRef(Date.now()),L=16,v=10,M=20,C=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","!","@","#","$","&","*","(",")","-","_","+","=","/","[","]","{","}",";",":","<",">",",","0","1","2","3","4","5","6","7","8","9"],P=()=>C[Math.floor(Math.random()*C.length)],m=()=>R[Math.floor(Math.random()*R.length)],E=e=>{const t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(n,c,a,u)=>c+c+a+a+u+u);const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null},z=(e,t,r)=>{const n={r:Math.round(e.r+(t.r-e.r)*r),g:Math.round(e.g+(t.g-e.g)*r),b:Math.round(e.b+(t.b-e.b)*r)};return`rgb(${n.r}, ${n.g}, ${n.b})`},A=(e,t)=>{const r=Math.ceil(e/v),n=Math.ceil(t/M);return{columns:r,rows:n}},j=(e,t)=>{g.current={columns:e,rows:t};const r=e*t;o.current=Array.from({length:r},()=>({char:P(),color:m(),targetColor:m(),colorProgress:1}))},T=()=>{const e=i.current;if(!e)return;const t=e.parentElement;if(!t)return;const r=window.devicePixelRatio||1,n=t.getBoundingClientRect();e.width=n.width*r,e.height=n.height*r,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,l.current&&l.current.setTransform(r,0,0,r,0,0);const{columns:c,rows:a}=A(n.width,n.height);j(c,a),w()},w=()=>{if(!l.current||o.current.length===0)return;const e=l.current,{width:t,height:r}=i.current.getBoundingClientRect();e.clearRect(0,0,t,r),e.font=`${L}px monospace`,e.textBaseline="top",o.current.forEach((n,c)=>{const a=c%g.current.columns*v,u=Math.floor(c/g.current.columns)*M;e.fillStyle=n.color,e.fillText(n.char,a,u)})},y=()=>{if(!o.current||o.current.length===0)return;const e=Math.max(1,Math.floor(o.current.length*.05));for(let t=0;t<e;t++){const r=Math.floor(Math.random()*o.current.length);o.current[r]&&(o.current[r].char=P(),o.current[r].targetColor=m(),h?o.current[r].colorProgress=0:(o.current[r].color=o.current[r].targetColor,o.current[r].colorProgress=1))}},F=()=>{let e=!1;o.current.forEach(t=>{if(t.colorProgress<1){t.colorProgress+=.05,t.colorProgress>1&&(t.colorProgress=1);const r=E(t.color),n=E(t.targetColor);r&&n&&(t.color=z(r,n,t.colorProgress),e=!0)}}),e&&w()},p=()=>{const e=Date.now();e-x.current>=b&&(y(),w(),x.current=e),h&&F(),d.current=requestAnimationFrame(p)};return s.useEffect(()=>{const e=i.current;if(!e)return;l.current=e.getContext("2d"),T(),p();let t;const r=()=>{clearTimeout(t),t=setTimeout(()=>{cancelAnimationFrame(d.current),T(),p()},100)};return window.addEventListener("resize",r),()=>{cancelAnimationFrame(d.current),window.removeEventListener("resize",r)}},[b,h]),f.jsxs("div",{className:"relative w-full h-full bg-[#101010] overflow-hidden",children:[f.jsx("canvas",{ref:i,className:"block w-full h-full"}),$&&f.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none bg-[radial-gradient(circle,_rgba(16,16,16,0)_60%,_rgba(16,16,16,1)_100%)]"}),_&&f.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none bg-[radial-gradient(circle,_rgba(0,0,0,0.8)_0%,_rgba(0,0,0,0)_60%)]"})]})};export{G as default};
